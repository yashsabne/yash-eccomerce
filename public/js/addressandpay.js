function openModalAdd(){document.getElementById("myModalAddress").style.display="flex"}function closeModalAdd(){document.getElementById("myModalAddress").style.display="none"}const openModalLink=document.querySelector(".openModalAddressLink"),openModelLinkBigOne=document.querySelector(".openModelLinkBigOne");async function removeAddress(e){try{let t=document.querySelector(`.js-address-container-${e}`);console.log(t),t&&t.remove();let d=await fetch("/delete-add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:e})});if(d.ok)console.log(`Address with index ${e} deleted successfully`);else throw Error("Failed to delete address")}catch(o){console.error("Error deleting address:",o)}}openModalLink.addEventListener("click",()=>{openModalAdd()});const deleteBtns=document.querySelectorAll(".deleteAddress");deleteBtns.forEach((e,t)=>{e.addEventListener("click",async()=>{await removeAddress(t)})});const textSpace=document.getElementById("savedtheaddressnotify"),SaveAddressButton=document.querySelector(".BtnAddressAdd"),formInputs=document.querySelectorAll('input[type="text"], input[type="email"], textarea, select'),modelBoxAlert=document.querySelector(".div-container-modelBox-alert");SaveAddressButton.addEventListener("click",e=>{let t=!0;formInputs.forEach(e=>{""===e.value.trim()&&e.required&&(t=!1)}),t||(e.preventDefault(),modelBoxAlert.innerHTML=` 
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Got Alert</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="color:red">
          Please Add All the fields
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>`)});const addressRadioButtons=document.querySelectorAll('input[name="selectAddress"]');let selectedAddressIndex=-1;addressRadioButtons.forEach((e,t)=>{e.addEventListener("click",()=>{selectedAddressIndex=t,console.log(`Selected address index: ${selectedAddressIndex}`)})});const paymentOptionsSelection=document.querySelectorAll('input[name="paymentOption"]');let selectedPaymentMethod="";async function handleOtherPaymentMethod(){try{let e=await fetch("/getTotalPiceWithDescription"),t=await e.json(),d=t.totalAfterTax,o=t.userName,r=t.emailAdd,n=async()=>{try{let e=await fetch("/orderConfirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedAddressIndex,selectedPaymentMethod,paymentDone:!0,totalPrice:d})});if(!e.ok)throw Error("Network response was not ok");window.location.href="/orderSucess"}catch(t){console.error("Error confirming order:",t)}},a={key:"rzp_test_SLeOOqQEvpGxpv",amount:100*d,currency:"INR",name:"Yash Store",image:"https://img.freepik.com/free-psd/silver-letters-glass-building-facade_145275-162.jpg",handler:async function(e){e.error?console.error("Payment error:",e.error):await n()},prefill:{name:o,email:r,contact:"7276462261"},theme:{color:"#00539C"}};document.getElementById("orderConfirmButton").onclick=function(){new Razorpay(a).open()}}catch(l){console.error("Error fetching data:",l)}c}paymentOptionsSelection.forEach(e=>{e.addEventListener("change",()=>{if(e.checked){if(selectedPaymentMethod=e.id,console.log(`Selected payment method: ${selectedPaymentMethod}`),"otherMethod"===selectedPaymentMethod)handleOtherPaymentMethod();else{async function t(){try{let e=await fetch("/getTotalPiceWithDescription"),t=await e.json(),d=t.totalAfterTax;t.userName,t.emailAdd;let o=async()=>{try{let e=await fetch("/orderConfirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedAddressIndex,selectedPaymentMethod,totalPrice:d})});if(!e.ok)throw Error("Network response was not ok");window.location.href="/orderSucess"}catch(t){console.error("Error confirming order:",t)}};document.getElementById("orderConfirmButton").onclick=function(){o()}}catch(r){console.error("There was a problem with your fetch operation:",r)}}t()}}})}),openModelLinkBigOne.addEventListener("click",()=>{openModalAdd()});
