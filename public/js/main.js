let cart=[];function openModal(t){updateModal(t),document.getElementById("myModal").style.display="flex"}const plusBtn=document.querySelector(".fa-plus"),minusBtn=document.querySelector(".fa-minus");function showHtml(){document.querySelector(".numberQ").innerHTML=quantityOfItem}let quantityOfItem=1;function addToCart(t){let e=quantityOfItem;console.log(e),fetch("/add-to-cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:parseInt(t.id),productName:String(t.title),productPrice:Number(t.price),productImage:t.image,productRating:t.rating,productCategory:t.category,quantityOfItem:Number(e)})}).then(t=>{t.ok?console.log("prodcut with product ID is added",productId):t.text().then(t=>{console.error(`Failed to add product to cart: ${t}`)})}).catch(t=>{console.error("Error adding product to cart:",t)}),saveToStorage()}function saveToStorage(){localStorage.setItem("cart",JSON.stringify(cart))}function updateModal(t){let e=document.getElementById("title-product-id");e.innerHTML=t.title;let r=document.querySelector(".img-product");r.innerHTML=`<img src="${t.image}">`;let n=document.querySelector(".price");n.innerHTML="Rs. "+t.price+" /-";let i=document.querySelector(".discription");i.innerHTML=t.description;let o=document.querySelector(".rating");o.innerHTML=`<img src="imges/ratings/rating-${10*t.rating.rate}.png">`;let d=document.querySelector(".rateCount");d.innerHTML=t.rating.count+" persons";let c=document.querySelector(".modelAddToCart");c.addEventListener("click",()=>addToCart(t))}function renderProducts(t){t.forEach(t=>{let e=document.createElement("div");e.classList.add("product"),e.innerHTML=`
            
                <img src="${t.image}">
                <div class="description">
                    <span>${t.title}.</span>
                    <div id="priceData">â‚¹ ${t.price} /-</div>
                </div>
                <div class="btn-div">
                    <button type="button" class="btn btn-dark openModalLink">View Details</button>
                </div>
        
        
            `,document.getElementById("productList").appendChild(e);let r=e.querySelector(".openModalLink");r.addEventListener("click",()=>{openModal(t)})})}plusBtn.addEventListener("click",()=>{quantityOfItem>=5?quantityOfItem=5:quantityOfItem++,showHtml()}),minusBtn.addEventListener("click",()=>{quantityOfItem<=0&&(quantityOfItem=0),quantityOfItem--,showHtml()}),fetch("/products").then(t=>t.json()).then(t=>{var e;let r=[];for(let n=0;n<t.length;n++)r.push(t[n]);function i(t){for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}}function o(t){t.sort((t,e)=>t.price-e.price),document.getElementById("productList").innerHTML="",renderProducts(t)}function d(t){t.sort((t,e)=>e.price-t.price),document.getElementById("productList").innerHTML="",renderProducts(t)}i(r),document.querySelectorAll(".radioC").forEach(t=>{t.addEventListener("change",function(){let t=document.querySelector('input[name="sort"]:checked').value;"low to high"==t&&o(r),"high to low"==t&&d(r)})}),renderProducts(r)}).catch(t=>console.error("Error fetching products:",t));
